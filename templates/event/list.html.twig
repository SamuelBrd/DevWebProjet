{% extends 'base.html.twig' %}

{% block title %}{% trans %} Events list {% endtrans %}{% endblock %}

{% block body %}
    {% if is_granted('ROLE_ADMIN') %}
        <ul class="nav navbar-nav navbar-right">
            <li>
                <div>
                    <b>
                        <a class="navbar-brand" href="/nouveauevent">{% trans %} Create an event {% endtrans %}</a>
                    </b>       
                </div>
            </li>
        </ul>
    {% endif %}
    
    <table class="table text-center">
        <tr>
            <th class="active text-center">{% trans %} Name {% endtrans %}</th>
            <th class="active text-center"> Type </th>
            <th class="active text-center"> Date </th>
            <th class="active text-center">{% trans %} Duration (days) {% endtrans %}</th>
            {% if is_granted('ROLE_ADMIN') %}
                <th class="active text-center">{% trans %} Edit {% endtrans %}</th>
                <th class="active text-center">{% trans %} Delete {% endtrans %}</th>
            {% endif %}
        </tr>

        {% for evenement in event %}
            {% if is_granted('ROLE_USER') %}
                {% if app.user.getCommuName()  ==  evenement.getTypeEvent() %}
                    <tr>
                        <td>{{ evenement.getNameEvent() }}</td>
                        <td>{{ evenement.getTypeEvent() }}</td>
                        <td>{{ evenement.getDateEvent() | date('d-m-Y') }}</td>
                        <td>{{ evenement.getDureeEvent() }}</td>
                        {% if is_granted('ROLE_ADMIN') %}
                            <td> <a href="event/{{evenement.getId()}}/edit"> <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> </a> </td>
                            <td> <a href="event/{{evenement.getId()}}/delete"> <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> </a> </td>
                        {% endif %}
                    </tr>
                {% endif %}
            {% else %}
                <tr>
                    <td>{{ evenement.getNameEvent() }}</td>
                    <td>{{ evenement.getTypeEvent() }}</td>
                    <td>{{ evenement.getDateEvent() | date('d-m-Y') }}</td>
                    <td>{{ evenement.getDureeEvent() }}</td>
                </tr>
            {% endif %}
        {% endfor %}
    </table>
{% endblock %}